<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
    *{
            margin: 0;
            padding: 0;
        }
    .out{
        position: relative;
    }
    .inner{
        width: 300px;
        list-style: none;
        margin: 0 auto;
    }
li{
    width:300px;
    height: 300px;
    margin-top: 10px;
    overflow: hidden;
}
img{background: url("./image/t.gif");
width: 100%;
height: 100%;
background-size: cover}

    </style>
</head>
<body>
<div class="out">
    <ul class="inner">
        <li><img datasrc="./image/1.jpg" alt=""></li>
        <li><img datasrc="./image/2.jpg" alt=""></li>
        <li><img datasrc="./image/3.jpg" alt=""></li>
        <li><img datasrc="./image/4.jpg" alt=""></li>
        <li><img datasrc="./image/5.jpg" alt=""></li>
        <li><img datasrc="./image/6.jpg" alt=""></li>
        <li><img datasrc="./image/7.jpg" alt=""></li>
        <li><img datasrc="./image/8.jpg" alt=""></li>
        <li><img datasrc="./image/9.jpg" alt=""></li>
        <li><img datasrc="./image/10.jpg" alt=""></li>
        <li><img datasrc="./image/11.jpg" alt=""></li>
        <li><img datasrc="./image/12.jpg" alt=""></li>
        <li><img datasrc="./image/13.jpg" alt=""></li>
        <li><img datasrc="./image/14.jpg" alt=""></li>
        <li><img datasrc="./image/15.jpg" alt=""></li>
        <li><img datasrc="./image/16.jpg" alt=""></li>
        <li><img datasrc="./image/17.jpg" alt=""></li>
        <li><img datasrc="./image/18.jpg" alt=""></li>
        <li><img datasrc="./image/19.jpg" alt=""></li>
        <li><img datasrc="./image/20.jpg" alt=""></li>
        <li><img datasrc="./image/21.jpg" alt=""></li>
        <li><img datasrc="./image/22.jpg" alt=""></li>
        <li><img datasrc="./image/23.jpg" alt=""></li>
    </ul>
</div>
<script>
var screenHeight = window.innerHeight||document.documentElement.clientHeight;
var count = 0;
var img = document.querySelectorAll('.inner img');

function show(){
    for(var i=count;i<img.length;i++){
        console.log(i);
        var top  = img[i].getBoundingClientRect().top;
        if(screenHeight-top >= 0){
            img[i].src = img[i].getAttribute('datasrc')
            count++;
        }
    }
}
//  扩展防抖方法debounce
function debounce(cb){
    var timer = null;
    return function(e){
        console.log(111)
        var context = this;
        var event = e;
        if(timer){
            clearTimeout(timer);
            timer  = setTimeout(function(){
                cb.call(context,event)
            },600)
        }else{
            
            timer  = setTimeout(function(){
                cb.call(context,event)
            },600)
        }
    }
}
document.onscroll = debounce(show);
show();


</script>
</body>
</html>